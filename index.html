<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIGA DOMINO MX</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <img src="logo.png" alt="Logo Liga Domino MX" class="logo">
        <div class="hamburger" onclick="toggleMenu()">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </header>

    <nav>
        <a href="#" onclick="showSection('clasificacion')">Clasificación</a>
        <a href="#" onclick="showSection('jornadas')">Jornadas</a>
        <a href="#" onclick="showSection('resultados')">Resultados</a>
    </nav>

    <div class="container" id="clasificacion-section">
        <h2>Tabla de Clasificación</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Pareja</th>
                        <th>JJ</th>
                        <th>G</th>
                        <th>P</th>
                        <th>PTS(D)</th>
                        <th>PTS</th>
                    </tr>
                </thead>
                <tbody id="teamTableBody">
                    <!-- Los equipos se agregarán dinámicamente aquí -->
                </tbody>
            </table>
        </div>
        <div class="table-description">
            <p><strong>JJ</strong>: Juegos Jugados</p>
            <p><strong>G</strong>: Juegos Ganados</p>
            <p><strong>P</strong>: Juegos Perdidos</p>
            <p><strong>PTS(D)</strong>: Puntos de Domino</p>
            <p><strong>PTS</strong>: Puntos de Victorias</p>
        </div>
    </div>

    <div class="container hidden" id="jornadas-section">
        <h2 id="jornada-title">Jornada 1</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Pareja Local</th>
                        <th>Pareja Visitante</th>
                    </tr>
                </thead>
                <tbody id="jornadasTableBody">
                    <!-- Los enfrentamientos se agregarán dinámicamente aquí -->
                </tbody>
            </table>
        </div>
        <div class="btn-container">
            <button onclick="previousJornada()">Jornada Anterior</button>
            <button onclick="nextJornada()">Siguiente Jornada</button>
        </div>
    </div>

    <div class="container hidden" id="resultados-section">
        <h2 id="resultados-title">Resultados</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Jornada</th>
                        <th>Pareja</th>
                        <th>PTS</th>
                        <th>Pareja</th>
                        <th>PTS</th>
                        <th>Resultado</th>
                    </tr>
                </thead>
                <tbody id="resultadosTableBody">
                    <!-- Los resultados se agregarán dinámicamente aquí -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let currentJornada = 1;

        function toggleMenu() {
            document.body.classList.toggle('menu-visible');
        }

        function showSection(section) {
            document.getElementById('clasificacion-section').classList.add('hidden');
            document.getElementById('jornadas-section').classList.add('hidden');
            document.getElementById('resultados-section').classList.add('hidden');

            if (section === 'clasificacion') {
                document.getElementById('clasificacion-section').classList.remove('hidden');
            } else if (section === 'jornadas') {
                document.getElementById('jornadas-section').classList.remove('hidden');
                loadJornada(currentJornada);
            } else if (section === 'resultados') {
                document.getElementById('resultados-section').classList.remove('hidden');
                loadResultados();
            }
        }

        async function loadExcel() {
            const response = await fetch('tabla_torneo_domino.xlsx'); // Ruta del archivo Excel
            const data = await response.arrayBuffer();
            const workbook = XLSX.read(data, { type: 'array' });

            // Cargar equipos
            const teamsSheet = workbook.Sheets[workbook.SheetNames[0]];
            const teams = XLSX.utils.sheet_to_json(teamsSheet);
            renderTable(teams);

            // Cargar jornadas
            window.jornadas = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[1]]);

            // Cargar resultados
            window.resultados = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[2]]);
        }

        function renderTable(teams) {
    const tbody = document.getElementById('teamTableBody');
    tbody.innerHTML = '';

    teams.forEach((team, index) => {
        const row = document.createElement('tr');
        const isTop8 = index < 8 ? 'highlight-top-8' : '';

        if (isTop8) {
            row.classList.add(isTop8);
        }

        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${team["Pareja"]}</td>
            <td>${team["JJ"]}</td>
            <td>${team["G"]}</td>
            <td>${team["P"]}</td>
            <td>${team["PTS(D)"]}</td>
            <td>${team["PTS"]}</td>
        `;

        tbody.appendChild(row);
    });
}


        function loadJornada(jornadaNumber) {
            const tbody = document.getElementById('jornadasTableBody');
            const jornadaTitle = document.getElementById('jornada-title');

            tbody.innerHTML = '';
            jornadaTitle.textContent = `Jornada ${jornadaNumber}`;

            const jornada = window.jornadas.filter(j => j.Jornada === jornadaNumber);

            jornada.forEach(match => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${match["Pareja Local"]}</td>
                    <td>${match["Pareja Visitante"]}</td>
                `;

                tbody.appendChild(row);
            });
        }

        function nextJornada() {
            currentJornada++;
            if (currentJornada > window.jornadas[window.jornadas.length - 1].Jornada) {
                currentJornada = window.jornadas[window.jornadas.length - 1].Jornada;
            }
            loadJornada(currentJornada);
        }

        function previousJornada() {
            currentJornada--;
            if (currentJornada < 1) {
                currentJornada = 1;
            }
            loadJornada(currentJornada);
        }

        function loadResultados() {
            const tbody = document.getElementById('resultadosTableBody');
            tbody.innerHTML = '';

            window.resultados.forEach(result => {
                const row = document.createElement('tr');

                const winnerClass = result["Resultado"] === "Local" ? "winner" : "";
                const loserClass = result["Resultado"] === "Visitante" ? "winner" : "";

                row.innerHTML = `
                    <td>${result["Jornada"]}</td>
                    <td class="${winnerClass}">${result["Pareja"]}</td>
                    <td class="${winnerClass}">${result["PTS"]}</td>
                    <td class="${loserClass}">${result["Pareja V"]}</td>
                    <td class="${loserClass}">${result["PTS V"]}</td>
                    <td>${result["Resultado"]}</td>
                `;

                tbody.appendChild(row);
            });
        }

        // Cargar automáticamente el archivo Excel al cargar la página
        document.addEventListener('DOMContentLoaded', loadExcel);
    </script>

    <!-- Incluir la librería SheetJS para leer Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.19.0/package/dist/xlsx.full.min.js"></script>
</body>
</html>
